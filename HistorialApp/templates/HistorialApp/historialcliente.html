{% extends 'BaseApp/base.html' %}
{% load static %}

{% block content %}
<div class="pd-ltr-20">
    <div class="card-box mb-30">
        <div class="pd-20">
            <h4 class="text-blue h4">Tabla de Todos los Clientes</h4>
        </div>
        <div class="pb-20">
            <input type="text" class="form-control" id="filtrar" placeholder="Filtrar Por Nombre" name="f" autofocus="f" />
            <table class="table hover multiple-select-row data-table-export nowrap">
                <thead>
                    <tr>
                        <th class="table-plus datatable-nosort">Codigo</th>
									<th>Nombres</th>
									<th>Tipo Cliente</th>
									<th>Telefono</th>
									<th>Cumpleaños</th>
									<th>Cuenta</th>
                    </tr>
                </thead>
                <tbody id="nombres">
                    {% for cliente in cliente %}
                    <tr>
                        <td class="table-plus"><a href="{% url 'DetalleCliente' cliente.id %}" class="text-white"><span class="badge bg-success">{{ cliente.codigo }}</span></a></td>
                        <td>{{ cliente.nombres }} {{ cliente.apellidos }}</td>
                        <td>{{ cliente.tipo }}</td>
                        <td>{{ cliente.telefono }} </td>
                        <td>{{ cliente.fecha_nac }}</td>
                        <td>Q.{{ cliente.cuenta }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<script >
function filtro() {
  // Accede al texto de entrada y a varios elementos del DOM
  let valor = document.getElementById("filtrar").value.toUpperCase();
  let nombres = document.getElementById("nombres");
  let filas = nombres.getElementsByTagName("tr");

  // Iteramos el arreglo de filas
  for(let i = 0; i < filas.length; i++){
    // Por cada fila se obtiene la referencia a la columna lenguaje
    let columnaLenguaje = filas[i].getElementsByTagName("td")[1];
    // Se extrae el texto de la columna lenguaje
    let lenguaje = columnaLenguaje.textContent;
    // Se muestra u oculta la fila si la entrada de texto
    // coincide con el texto de la columna lenguaje
    filas[i].style.display = lenguaje.toUpperCase().indexOf(valor) > -1 ? "" : "none";
  }
}

// Se agrega un escuchador de eventos a la entrada de texto
// para activar la función de filtrado cada vez que el usuario
// ingresa texto en la entrada
document.getElementById("filtrar").addEventListener("keyup", filtro);
</script>
{% endblock %}

